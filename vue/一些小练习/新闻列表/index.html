<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>demo by hans</title>
    <style>
    
    </style>
</head>
<body>
    <div id="app">  
        <router-view></router-view>
    </div>
</body>
<template id="newsList">
    <ul>
        <li v-for="(item, idx) in list">
            <router-link /:to="{name:'articlelink',params:{id:item.aid}}">{{item.title}}</router-link>
        </li>
    </ul>
</template>
<template id="article">
    <div class="article">
        <a href="javascript:history.go(-1)">&lt;&lt;返回上一页</a>
        <h2>{{title}}</h2>
        <div v-html="content"></div>
    </div>
</template>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    let $ = sel => document.querySelector(sel);
    let $$ = sel => document.querySelectorAll(sel);
    let log = console.log.bind(console);
    // axios地址  https://github.com/axios/axios
    // 所有新闻数据接口
    // http://www.phonegap100.com/appapi.php?a=getPortalList&catid=20
    // 每条新闻的详细信息
    // http://www.phonegap100.com/appapi.php?a=getPortalArticle&aid=文章id
    // 豆瓣数据接口
    // https://api.douban.com/v2/movie/top250?count=20&&start=20

    Vue.prototype.$axios = axios;
    let newsList = {
        template: '#newsList',
        data() {
            return {
                list: [],
            }
        },
        created() {
            this.$axios.get('http://www.phonegap100.com/appapi.php?a=getPortalList&catid=20')
                .then((res) => {
                    this.list = res.data.result;
                })
        },
    }
    let article = {
        template: '#article',
        data() {
            return {
                content: '',
                title: '',
            }
        },
        created() {
            this.$axios.get('http://www.phonegap100.com/appapi.php?a=getPortalArticle&aid=' + this.$route.params.id)
                .then((res) => {
                    let [{ content, title }] = res.data.result;
                    this.content = content;
                    this.title = title;
                })
        },
    }
    let routes = [
        { path: '/', component: newsList, },
        { path: '/article/:id', name: 'articlelink', component: article, },
    ]
    let router = new VueRouter({
        routes,
    })
    let vm = new Vue({
        el: '#app',
        router,
    })
</script>
</html>